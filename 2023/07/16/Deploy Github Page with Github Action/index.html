<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Deploy Github Page with Github Action | Tianqi.log</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="I’m using Hexo + Github action + Github page to create and deploy this blog. It’s a very handy tool to do automation. What is Github action? GitHub Actions is a continuous integration and continuous d">
<meta property="og:type" content="article">
<meta property="og:title" content="Deploy Github Page with Github Action">
<meta property="og:url" content="https://wangberlint.github.io/2023/07/16/Deploy%20Github%20Page%20with%20Github%20Action/index.html">
<meta property="og:site_name" content="Tianqi.log">
<meta property="og:description" content="I’m using Hexo + Github action + Github page to create and deploy this blog. It’s a very handy tool to do automation. What is Github action? GitHub Actions is a continuous integration and continuous d">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://wangberlint.github.io/2023/07/16/Deploy%20Github%20Page%20with%20Github%20Action/github_action.png">
<meta property="article:published_time" content="2023-07-16T20:33:56.000Z">
<meta property="article:modified_time" content="2023-07-16T14:10:29.069Z">
<meta property="article:author" content="Tian Qi">
<meta property="article:tag" content="CI&#x2F;CD">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://wangberlint.github.io/2023/07/16/Deploy%20Github%20Page%20with%20Github%20Action/github_action.png">
  
    <link rel="alternate" href="/atom.xml" title="Tianqi.log" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 6.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Tianqi.log</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://wangberlint.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-Deploy Github Page with Github Action" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2023/07/16/Deploy%20Github%20Page%20with%20Github%20Action/" class="article-date">
  <time class="dt-published" datetime="2023-07-16T20:33:56.000Z" itemprop="datePublished">2023-07-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      Deploy Github Page with Github Action
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>I’m using <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a> + <a target="_blank" rel="noopener" href="https://github.com/features/actions">Github action</a> + Github page to create and deploy this blog.</p>
<p>It’s a very handy tool to do automation.</p>
<h2 id="What-is-Github-action"><a href="#What-is-Github-action" class="headerlink" title="What is Github action?"></a>What is Github action?</h2><blockquote>
<p>GitHub Actions is a continuous integration and continuous delivery (CI&#x2F;CD) platform that allows you to automate your build, test, and deployment pipeline. You can create workflows that build and test every pull request to your repository, or deploy merged pull requests to production.</p>
</blockquote>
<p>In short, Github action allows you to do some automation base on the events.</p>
<h2 id="How-it-works"><a href="#How-it-works" class="headerlink" title="How it works?"></a><strong>How it works?</strong></h2><img src="/2023/07/16/Deploy%20Github%20Page%20with%20Github%20Action/github_action.png" class="" title="Untitled">

<p>Github action contains the following parts:</p>
<ol>
<li>Event: a group of github &#x2F; git events</li>
<li>Workflow: A workflow observes events, check condition, and run jobs parallel or sequentially.</li>
<li>Job: A job will execute several steps sequencially in an environment.</li>
<li>Step: A step is a group of sequencial actions and scripts. We can find a lot of handy action in <a target="_blank" rel="noopener" href="https://github.com/sdras/awesome-actions#github-pages">awesome-actions</a></li>
</ol>
<p>This is the example of my blog’s Github action configuration.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"># ./github/workflows/pages.yaml</span><br><span class="line">name: Pages # the name of the workflow.</span><br><span class="line"></span><br><span class="line">on: # events and conditions</span><br><span class="line">  push: # only push event on main branch will trigger it</span><br><span class="line">    branches:</span><br><span class="line">      - main  # <span class="keyword">default</span> branch</span><br><span class="line"></span><br><span class="line">jobs: # jobs it runs</span><br><span class="line">  pages: # a job called pages</span><br><span class="line">    runs-on: ubuntu-latest # run on ubunto-latest enviorment</span><br><span class="line">    permissions:</span><br><span class="line">      contents: write</span><br><span class="line">    steps: # steps executed in the job</span><br><span class="line">      - uses: actions/checkout<span class="meta">@v3</span> # step1 checkout branch https:<span class="comment">//github.com/actions/checkout</span></span><br><span class="line">        with:</span><br><span class="line">          token: $&#123;&#123; secrets.GITHUB_TOKEN &#125;&#125;</span><br><span class="line">          # If your repository depends on submodule, please see: https:<span class="comment">//github.com/actions/checkout</span></span><br><span class="line">          submodules: recursive</span><br><span class="line">      - name: Use Node.js <span class="number">18.</span>x # step2 setup nodejs</span><br><span class="line">        uses: actions/setup-node<span class="meta">@v2</span></span><br><span class="line">        with:</span><br><span class="line">          node-version: <span class="string">&#x27;18&#x27;</span></span><br><span class="line">      - name: Cache NPM dependencies # step3 setup dependencies cache</span><br><span class="line">        uses: actions/cache<span class="meta">@v2</span> # https:<span class="comment">//github.com/actions/cache</span></span><br><span class="line">        with:</span><br><span class="line">          path: node_modules</span><br><span class="line">          key: $&#123;&#123; runner.OS &#125;&#125;-npm-cache</span><br><span class="line">          restore-keys: |</span><br><span class="line">            $&#123;&#123; runner.OS &#125;&#125;-npm-cache</span><br><span class="line">      - name: Install Dependencies # step4 install dependencies</span><br><span class="line">        run: npm install # script</span><br><span class="line">      - name: Build # step <span class="number">5</span> build blog pages.</span><br><span class="line">        run: npm run build</span><br><span class="line">      - name: Deploy # step <span class="number">6</span> deploy page to github page</span><br><span class="line">        uses: peaceiris/actions-gh-pages<span class="meta">@v3</span> # https:<span class="comment">//github.com/peaceiris/actions-gh-pages</span></span><br><span class="line">        with:</span><br><span class="line">          github_token: $&#123;&#123; secrets.GITHUB_TOKEN &#125;&#125;</span><br><span class="line">          publish_dir: ./<span class="keyword">public</span></span><br></pre></td></tr></table></figure>

<p>The workflow is configurated in <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/YAML">YAML</a> file. Github action will check and run workflow YAML files under <code>./github/workflows/</code> accroding to the given event.</p>
<p>So in this <code>pages</code> workflow, everytimes I push something to <code>main</code> branch, it will execute the following 6 steps:</p>
<ol>
<li>checkout and update current branch</li>
<li>setup <a target="_blank" rel="noopener" href="https://nodejs.org/en">Node.js</a></li>
<li>cache npm dependencies (next time <code>npm install</code> will skip all cached dependencies)</li>
<li>install all dependencies.</li>
<li>build hexo blog</li>
<li>deploy the web page output to github page.</li>
</ol>
<h2 id="Read-more"><a href="#Read-more" class="headerlink" title="Read more"></a>Read more</h2><p><a target="_blank" rel="noopener" href="https://aws.amazon.com/devops/continuous-integration/#:~:text=Continuous%20integration%20refers%20to%20the,for%20a%20release%20to%20production">AWS: What is Continuous Integration?</a>.</p>
<p><a target="_blank" rel="noopener" href="https://hexo.io/docs/github-pages">Hexo: deploy to github page</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://wangberlint.github.io/2023/07/16/Deploy%20Github%20Page%20with%20Github%20Action/" data-id="clk5ikyf60000ipos95pj7s13" data-title="Deploy Github Page with Github Action" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/CI-CD/" rel="tag">CI&#x2F;CD</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
  
    <a href="/2023/07/13/blog/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">Blog.init</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CI-CD/" rel="tag">CI&#x2F;CD</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/verbose/" rel="tag">verbose</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CI-CD/" style="font-size: 10px;">CI/CD</a> <a href="/tags/verbose/" style="font-size: 10px;">verbose</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2023/07/">July 2023</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2023/07/16/Deploy%20Github%20Page%20with%20Github%20Action/">Deploy Github Page with Github Action</a>
          </li>
        
          <li>
            <a href="/2023/07/13/blog/">Blog.init</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2023 Tian Qi<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>